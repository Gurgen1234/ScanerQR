<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Карта РГАУ-МСХА им К.А. Тимирязева</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://api-maps.yandex.ru/2.1/?apikey=1f81140c-a67d-4b34-bbbe-2dba0bd0002a&lang=ru_RU"
            type="text/javascript"></script>
    <style>
		html {
			height: 100%;
			width: 100%;
		}
		body {
			height: 100%;
			width: 100%;
			position: relative;
			margin: 0;
		}
		#map {
			width: 100%;
			height: 100%;
			position: relative;
		}
	</style>
    <script type="text/javascript"> ymaps.ready(init);



function init() {
    var myMap = new ymaps.Map('map', {
        center: [55.831672, 37.554786],
        zoom: 15.5,
        controls: ['zoomControl', 'routePanelControl']
    }),
        myCollection = new ymaps.GeoObjectCollection(),
        // Создаем массив с данными.
        myPoints = [

            { coords: [55.834416, 37.548573], text: 'Почвенно-агрономический музей имени В.Р. Вильямса, Прянишникова, 6' },
            { coords: [55.831292, 37.551196], text: 'Музей истории МСХА, Тимирязевская улица, 45' },
            { coords: [55.830560, 37.553383], text: 'Научно-художественный музей коневодства, Тимирязевская улица, 44' },
            { coords: [55.835978, 37.566593], text: 'Музей животноводства имени Е.Ф. Лискуна, Лиственничная аллея, 14' },
            { coords: [55.817987, 37.556271], text: 'Музей леса им. А.Р. Варгаса де Бедемара, ул. Вучетича, д. 46' },
            { coords: [55.836595, 37.555984], text: 'Музей агроинженерии и техники имени В.П. Горячкина, ул. Прянишникова, д. 14' },
            { coords: [55.830816, 37.553118], text: 'Музей Анатомии им. Б.К. Гиндце, ул. Тимирязевская, 44' },
            { coords: [55.833673, 37.550917], text: 'Зоологический музей имени Н.М. Кулагина, Тимирязевская улица, 44' },
            { coords: [55.834229, 37.547641], text: 'Геолого-минералогический музей, ул. Прянишникова, д. 6' },
            { coords: [55.754917, 37.609101], text: 'Мемориальный музей-квартира К.А. Тимирязева, Романов переулок, 4' },
			{ coords: [55.835569, 37.549157], text: 'Музей мелиорации и гидротехники имени А.Н. Костякова, ул. Прянишникова, д. 19' }
        ];

    // Заполняем коллекцию данными.
    for (var i = 0, l = myPoints.length; i < l; i++) {
        var point = myPoints[i];
        myCollection.add(new ymaps.Placemark(
            point.coords, {
            balloonContentBody: point.text
        }
        ));
    }

    // Добавляем коллекцию меток на карту.
    //myMap.geoObjects.add(myCollection);

    // Создаем экземпляр класса ymaps.control.SearchControl
    var mySearchControl = new ymaps.control.SearchControl({
        options: {
            // Заменяем стандартный провайдер данных (геокодер) нашим собственным.
            provider: new CustomSearchProvider(myPoints),
            // Не будем показывать еще одну метку при выборе результата поиска,
            // т.к. метки коллекции myCollection уже добавлены на карту.
            noPlacemark: true,
            resultsPerPage: 5
        }
    });

    // Добавляем контрол в верхний правый угол,
    myMap.controls
        .add(mySearchControl, { float: 'right' }),

        objectManager = new ymaps.ObjectManager({
            // Чтобы метки начали кластеризоваться, выставляем опцию.
            clusterize: 1,
            // ObjectManager принимает те же опции, что и кластеризатор.
            gridSize: 8,
            // Макет метки кластера pieChart.
            clusterIconLayout: "default#pieChart"
        });
    myMap.geoObjects.add(objectManager);

    var control = myMap.controls.get('routePanelControl');

    control.options.set({
        //Отключим автоматическую фокусировку на панели для построения маршрутов
        autofocus: false
    });

    // Зададим состояние панели для построения машрутов.
    control.routePanel.state.set({
        // Тип маршрутизации.
        type: 'masstransit',

        // Адрес или координаты пункта отправления.


        // Включим возможность задавать пункт отправления в поле ввода.
        fromEnabled: true,
        //Выключим возможность задавать пункт назначения в поле ввода.
        toEnabled: true
    });

    // Зададим опции панели для построения машрутов.
    control.routePanel.options.set({

        // Запрещаем показ кнопки, позволяющей менять местами начальную и конечную точки маршрута.
        // Включим определение адреса по координатам клика.
        // Адрес будет автоматически подставляться в поле ввода на панели, а также в подпись метки маршрута.
        reverseGeocoding: true,
        // Зададим виды маршрутизации, которые будут доступны пользователям для выбора.
        types: { masstransit: true, pedestrian: true, taxi: true }
    });

    // Создаем 2 пункта выпадающего списка
    var listBoxItems = ['Общежитие', 'Корпус','Культура']
        .map(function (title) {
            return new ymaps.control.ListBoxItem({
                data: {
                    content: title
                },
                state: {
                    selected: true
                }
            })
        }),
        // Теперь создадим список, содержащий 2 пункта
        listBoxControl = new ymaps.control.ListBox({
            data: {
                content: 'Фильтр',
                title: 'Фильтр'
            },
            items: listBoxItems,
            state: {
                // Признак, развернут ли список.
                expanded: true,
                filters: listBoxItems.reduce(function (filters, filter) {
                    filters[filter.data.get('content')] = filter.isSelected();
                    return filters;
                }, {})
            }
        });


    objectManager.add({
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature", "id": 1, "geometry": { "type": "Point", "coordinates": [55.834416, 37.548573] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Почвенно-агрономический музей имени В.Р. Вильямса</div><div class=\"address\">Прянишникова, 6</div>",
                    "clusterCaption": "Культура", "hintContent": "Почвенно-агрономический музей имени В.Р. Вильямса", "iconCaption": "Почвенно-агрономический музей имени В.Р. Вильямса"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
            {
                "type": "Feature", "id": 2, "geometry": { "type": "Point", "coordinates": [55.831292, 37.551196] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Музей истории МСХА</div><div class=\"address\">Тимирязевская улица, 45</div>",
                    "clusterCaption": "Культура", "hintContent": "Музей истории МСХА", "iconCaption": "Музей истории МСХА"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
            {
                "type": "Feature", "id": 3, "geometry": { "type": "Point", "coordinates": [55.830560, 37.553383] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Научно-художественный музей коневодства</div><div class=\"address\">Тимирязевская улица, 44</div>",
                    "clusterCaption": "Культура", "hintContent": "Научно-художественный музей коневодства", "iconCaption": "Научно-художественный музей коневодства"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
            {
                "type": "Feature", "id": 4, "geometry": { "type": "Point", "coordinates": [55.835978, 37.566593] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Музей животноводства имени Е.Ф. Лискуна</div><div class=\"address\">Лиственничная аллея, 14</div>",
                    "clusterCaption": "Культура", "hintContent": "Музей животноводства имени Е.Ф. Лискуна", "iconCaption": "Музей животноводства имени Е.Ф. Лискуна"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
			{
                "type": "Feature", "id": 5, "geometry": { "type": "Point", "coordinates": [55.817987, 37.556271] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Музей леса им. А.Р. Варгаса де Бедемара</div><div class=\"address\">ул. Вучетича, д. 46</div>",
                    "clusterCaption": "Культура", "hintContent": "Музей леса им. А.Р. Варгаса де Бедемара", "iconCaption": "Музей леса им. А.Р. Варгаса де Бедемара"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
			{
                "type": "Feature", "id": 6, "geometry": { "type": "Point", "coordinates": [55.836595, 37.555984] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Музей агроинженерии и техники имени В.П. Горячкина</div><div class=\"address\">ул. Прянишникова, д. 14</div>",
                    "clusterCaption": "Культура", "hintContent": "Музей агроинженерии и техники имени В.П. Горячкина", "iconCaption": "Музей агроинженерии и техники имени В.П. Горячкина"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
			{
                "type": "Feature", "id": 7, "geometry": { "type": "Point", "coordinates": [55.830816, 37.553118] }, "properties": {
                    "class": "Культура", "balloonContentHeader": "<div class=\"object_name\">Музей Анатомии им. Б.К. Гиндце</div><div class=\"address\">ул. Тимирязевская, 44</div>",
                    "clusterCaption": "Культура", "hintContent": "Музей Анатомии им. Б.К. Гиндце", "iconCaption": "Музей Анатомии им. Б.К. Гиндце"
                }, "options": { "preset": "islands#redLeisureCircleIcon" }
            },
			{
                "type": "Feature", "id": 8, "geometry": { "type": "Point", "coordinates": [55.833981, 37.552085] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус №6</div><div class=\"address\">Тимирязевский проезд, 2</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус №6", "iconCaption": "Учебный корпус №6"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 9, "geometry": { "type": "Point", "coordinates": [55.830452, 37.554888] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус №15</div><div class=\"address\">Верхняя аллея, 4</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус №15", "iconCaption": "Учебный корпус №15"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 10, "geometry": { "type": "Point", "coordinates": [55.832374, 37.557385] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус №1</div><div class=\"address\">Лиственничная аллея, 4А</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус №1", "iconCaption": "Учебный корпус №1"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 12, "geometry": { "type": "Point", "coordinates": [55.833471, 37.560619] }, "properties": {
                    "class": "Спорт", "balloonContentHeader": "<div class=\"object_name\">Теннисный корт РГАУ-МСХА</div><div class=\"address\">Лиственничная аллея, 8А</div>",
                    "clusterCaption": "Спорт", "hintContent": "Теннисный корт РГАУ-МСХА", "iconCaption": "Теннисный корт РГАУ-МСХА"
                }, "options": { "preset": "islands#blueSportCircleIcon" }
            },
            {
                "type": "Feature", "id": 13, "geometry": { "type": "Point", "coordinates": [55.834972, 37.554978] }, "properties": {
                    "class": "Наука", "balloonContentHeader": "<div class=\"object_name\">Центр молекулярной биотехнологии</div><div class=\"address\">Лиственничная аллея, 5</div>",
                    "clusterCaption": "Наука", "hintContent": "Центр молекулярной биотехнологии", "iconCaption": "Центр молекулярной биотехнологии"
                }, "options": { "preset": "islands#yellowScienceCircleIcon" }
            },
			{
                "type": "Feature", "id": 14, "geometry": { "type": "Point", "coordinates": [55.831707, 37.553411] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Приёмная комиссия РГАУ-МСХА имени К. А. Тимирязева</div><div class=\"address\">Лиственничная аллея, 2Д</div>",
                    "clusterCaption": "Образование", "hintContent": "Приёмная комиссия РГАУ-МСХА имени К. А. Тимирязева", "iconCaption": "Приёмная комиссия РГАУ-МСХА имени К. А. Тимирязева"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
			{
                "type": "Feature", "id": 15, "geometry": { "type": "Point", "coordinates": [55.831030, 37.554288] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Общежитие № 9 РГАУ МСХА им. К. А. Тимирязева</div><div class=\"address\">Верхняя аллея, 1</div>",
                    "clusterCaption": "Жилье", "hintContent": "Общежитие № 9 РГАУ МСХА им. К. А. Тимирязева", "iconCaption": "Общежитие № 9 РГАУ МСХА им. К. А. Тимирязева"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 16, "geometry": { "type": "Point", "coordinates": [55.831759, 37.556246] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 8 РГАУ МСХА им. К. А. Тимирязева</div><div class=\"address\">Лиственничная аллея, 2Б</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 8 РГАУ МСХА им. К. А. Тимирязева", "iconCaption": "Студенческое общежитие № 8 РГАУ МСХА им. К. А. Тимирязева"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 17, "geometry": { "type": "Point", "coordinates": [55.831981, 37.555036] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 7 РГАУ-МСХА им. К. А. Тимирязева</div><div class=\"address\">Лиственничная аллея, 2А</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 7 РГАУ-МСХА им. К. А. Тимирязева", "iconCaption": "Студенческое общежитие № 7 РГАУ-МСХА им. К. А. Тимирязева"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
            {
                "type": "Feature", "id": 18, "geometry": { "type": "Point", "coordinates": [55.833197, 37.554545] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 12</div><div class=\"address\">Лиственничная аллея, 2</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 12", "iconCaption": "Учебный корпус № 12"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 19, "geometry": { "type": "Point", "coordinates": [55.833316, 37.552816] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Центральная научная библиотека имени Н.И. Железнова</div><div class=\"address\">Лиственничная аллея, 2к1</div>",
                    "clusterCaption": "Образование", "hintContent": "Центральная научная библиотека имени Н.И. Железнова", "iconCaption": "Центральная научная библиотека имени Н.И. Железнова"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
			},
            {
                "type": "Feature", "id": 20, "geometry": { "type": "Point", "coordinates": [55.832351, 37.551607] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 5, РГАУ-МСХА им. К. А. Тимирязева</div><div class=\"address\">Тимирязевская улица, 48</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 5, РГАУ-МСХА им. К. А. Тимирязева", "iconCaption": "Учебный корпус № 5, РГАУ-МСХА им. К. А. Тимирязева"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 21, "geometry": { "type": "Point", "coordinates": [55.832758, 37.551134] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\"> Учебный корпус № 9</div><div class=\"address\">Тимирязевская улица, 52</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 9", "iconCaption": "Учебный корпус № 9"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 23, "geometry": { "type": "Point", "coordinates": [55.833032, 37.549802] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Главный дом усадьбы Петровско-Разумовское</div><div class=\"address\">Тимирязевская улица, 49</div>",
                    "clusterCaption": "Образование", "hintContent": "Главный дом усадьбы Петровско-Разумовское", "iconCaption": "Главный дом усадьбы Петровско-Разумовское"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 24, "geometry": { "type": "Point", "coordinates": [55.833687, 37.556423] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 2</div><div class=\"address\">Лиственничная аллея, 4</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 2", "iconCaption": "Учебный корпус № 2"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 25, "geometry": { "type": "Point", "coordinates": [55.834216, 37.557500] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 24</div><div class=\"address\">Лиственничная аллея, 6</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 24", "iconCaption": "Учебный корпус № 24"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 26, "geometry": { "type": "Point", "coordinates": [55.835298, 37.569418] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 25</div><div class=\"address\">Лиственничная аллея, 6</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 25", "iconCaption": "Учебный корпус № 25"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
			{
                "type": "Feature", "id": 27, "geometry": { "type": "Point", "coordinates": [55.834826, 37.568387] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 4 РГАУ-МСХА им. К. А. Тимирязева</div><div class=\"address\">Лиственничная аллея, 16Ак4</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 4 РГАУ-МСХА им. К. А. Тимирязева", "iconCaption": "Студенческое общежитие № 4 РГАУ-МСХА им. К. А. Тимирязева"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 28, "geometry": { "type": "Point", "coordinates": [55.834972, 37.569332] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Общежитие № 5</div><div class=\"address\">Лиственничная аллея, 16Ак3</div>",
                    "clusterCaption": "Жилье", "hintContent": "Общежитие № 5", "iconCaption": "Общежитие № 5"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 29, "geometry": { "type": "Point", "coordinates": [55.835356, 37.570411] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Общежитие № 11</div><div class=\"address\">Дмитровское шоссе, 47к2</div>",
                    "clusterCaption": "Жилье", "hintContent": "Общежитие № 11", "iconCaption": "Общежитие № 11"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 30, "geometry": { "type": "Point", "coordinates": [55.835221, 37.571410] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 10</div><div class=\"address\">Дмитровское шоссе, 47</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 10", "iconCaption": "Студенческое общежитие № 10"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
			{
                "type": "Feature", "id": 31, "geometry": { "type": "Point", "coordinates": [55.836325, 37.568281] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 3</div><div class=\"address\">Лиственничная аллея, 16</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 3", "iconCaption": "Студенческое общежитие № 3"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            },
            {
                "type": "Feature", "id": 32, "geometry": { "type": "Point", "coordinates": [55.834116, 37.564899] }, "properties": {
                    "class": "Спорт", "balloonContentHeader": "<div class=\"object_name\">Спортивно-оздоровительный комплекс имени К.А. Тимирязева</div><div class=\"address\">Лиственничная аллея, 12Б</div>",
                    "clusterCaption": "Спорт", "hintContent": "Спортивно-оздоровительный комплекс имени К.А. Тимирязева", "iconCaption": "Спортивно-оздоровительный комплекс имени К.А. Тимирязева"
                }, "options": { "preset": "islands#blueSportCircleIcon" }
            },
            {
                "type": "Feature", "id": 33, "geometry": { "type": "Point", "coordinates": [55.834836, 37.557207] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 26</div><div class=\"address\">Лиственничная аллея, 7</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 26", "iconCaption": "Учебный корпус № 26"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 34, "geometry": { "type": "Point", "coordinates": [55.835205, 37.556181] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 23</div><div class=\"address\">Лиственничная аллея, 7с2</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 23", "iconCaption": "Учебный корпус № 23"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 35, "geometry": { "type": "Point", "coordinates": [55.835517, 37.557413] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 22</div><div class=\"address\">улица Прянишникова, 14с7</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 22", "iconCaption": "Учебный корпус № 22"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 36, "geometry": { "type": "Point", "coordinates": [55.836524, 37.557203] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 21</div><div class=\"address\">улица Прянишникова, 14с6</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 21", "iconCaption": "Учебный корпус № 21"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 37, "geometry": { "type": "Point", "coordinates": [55.836373, 37.554947] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 18</div><div class=\"address\">улица Прянишникова, 12</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 18", "iconCaption": "Учебный корпус № 18"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
            {
                "type": "Feature", "id": 38, "geometry": { "type": "Point", "coordinates": [55.837482, 37.555390] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Учебный корпус № 37</div><div class=\"address\">улица Прянишникова, 37</div>",
                    "clusterCaption": "Образование", "hintContent": "Учебный корпус № 37", "iconCaption": "Учебный корпус № 37"
                }, "options": { "preset": "islands#greenEducationCircleIcon" }
            },
			{
                "type": "Feature", "id": 39, "geometry": { "type": "Point", "coordinates": [55.836754, 37.556273] }, "properties": {
                    "class": "Корпус", "balloonContentHeader": "<div class=\"object_name\">Студенческое общежитие № 6</div><div class=\"address\">улица Прянишникова, 14к2</div>",
                    "clusterCaption": "Жилье", "hintContent": "Студенческое общежитие № 6", "iconCaption": "Студенческое общежитие № 6"
                }, "options": { "preset": "islands#violetHomeCircleIcon" }
            }
        ]
    });

}
// Провайдер данных для элемента управления ymaps.control.SearchControl.
// Осуществляет поиск геообъектов в по массиву points.
// Реализует интерфейс IGeocodeProvider.
function CustomSearchProvider(points) {
    this.points = points;
}

// Провайдер ищет по полю text стандартным методом String.ptototype.indexOf.
CustomSearchProvider.prototype.geocode = function (request, options) {
    var deferred = new ymaps.vow.defer(),
        geoObjects = new ymaps.GeoObjectCollection(),
        // Сколько результатов нужно пропустить.
        offset = options.skip || 0,
        // Количество возвращаемых результатов.
        limit = options.results || 20;

    var points = [];
    // Ищем в свойстве text каждого элемента массива.
    for (var i = 0, l = this.points.length; i < l; i++) {
        var point = this.points[i];
        if (point.text.toLowerCase().indexOf(request.toLowerCase()) != -1) {
            points.push(point);
        }
    }
    // При формировании ответа можно учитывать offset и limit.
    points = points.splice(offset, limit);
    // Добавляем точки в результирующую коллекцию.
    for (var i = 0, l = points.length; i < l; i++) {
        var point = points[i],
            coords = point.coords,
            text = point.text;

        geoObjects.add(new ymaps.Placemark(coords, {
            name: text + ' name',
            description: text + ' description',
            balloonContentBody: '<p>' + text + '</p>',
            boundedBy: [coords, coords]
        }));
    }

    deferred.resolve({
        // Геообъекты поисковой выдачи.
        geoObjects: geoObjects,
        // Метаинформация ответа.
        metaData: {
            geocoder: {
                // Строка обработанного запроса.
                request: request,
                // Количество найденных результатов.
                found: geoObjects.getLength(),
                // Количество возвращенных результатов.
                results: limit,
                // Количество пропущенных результатов.
                skip: offset
            }
        }
    });

    // Возвращаем объект-обещание.
    return deferred.promise();
};</script>
</head>

<body>
<div id="map"></div>
</body>

</html>
